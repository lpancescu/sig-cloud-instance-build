{
  "builders" : [{
    "type": "virtualbox-iso",
    "guest_os_type": "RedHat_64",
    "hard_drive_interface": "sata",
    "headless": "false",
    "guest_additions_mode": "attach",
    "vboxmanage": [
      ["modifyvm", "{{.Name}}", "--memory", "1024"],
      ["modifyvm", "{{.Name}}", "--paravirtprovider", "none"]
    ],
    "iso_url": "http://ftp-stud.fht-esslingen.de/pub/Mirrors/centos/7/isos/x86_64/CentOS-7-x86_64-NetInstall-1511.iso",
    "iso_checksum": "9ed9ffb5d89ab8cca834afce354daa70a21dcb410f58287d6316259ff89758f5",
    "iso_checksum_type": "sha256",
    "boot_command": [
      "<tab><spacebar>",
      "inst.ks=http://{{ .HTTPIP }}:{{ .HTTPPort }}/centos7.ks<return>"
    ],
    "http_directory": ".",
    "ssh_username": "vagrant",
    "ssh_private_key_file": "insecure_private_key",
    "ssh_timeout": "60m",
    "shutdown_command": "sudo poweroff"
  }],
  "provisioners": [{
    "type": "shell",
    "inline": [
      "set -e -x -o pipefail",
      "sudo lsblk -flo NAME,LABEL | awk '/VBOXADDITIONS/ { print $1 }' | xargs -I DEVICE sudo mount -t iso9660 /dev/DEVICE /mnt",
      "(cd /mnt && sudo sh ./VBoxLinuxAdditions.run)"
    ]
  }],
  "post-processors": [{
    "type": "vagrant",
    "output": "packer_CentOS7_{{.BuildName}}_{{.Provider}}.box"
  }]
}
